<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>CKEditor 5 – stock3 editor build – development sample</title>
	<style>
		body {
			max-width: 800px;
			margin: 20px auto;
		}

		span[data-user-id] {
			background-color: #00b0f0;
		}
	</style>
</head>
<body>

<h1>CKEditor 5 – stock3 editor build – development sample</h1>

<div id="editor">
	<h2>Sample</h2>

	<p>This is an instance of the stock3 editor build.</p>

	<figure class="image">
		<img src="../tests/manual/sample.jpg" alt="Autumn fields" />
	</figure>

	<p>You can use this sample to validate whether your <a href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/development/custom-builds.html">custom build</a> works fine.</p>
</div>

<script src="../build/ckeditor.js"></script>
<script>
	class ChartingAdapter {
		constructor(editor) {
			this.editor = editor;
		}

		init() {
			const chartingPlugin = this.editor.plugins.get('Charting');
			chartingPlugin.adapter = this;
		}

		getCharts() {
			return new Promise((resolve) => {
				const dummy = {
					id: 4752216,
					thumbSrc: 'https://api.boerse-go.de/charting/4752216.image?application=default&template=thumb&client_id=gmt',
					imageSrc: 'https://api.boerse-go.de/charting/4752216.image?application=default&template=chart&client_id=gmt',
					chartName: 'Fibonacci Test',
					instrumentName: 'DAX'
				};
				setTimeout(() => {
					resolve([
						dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy,
						dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy, dummy
					])
				}, 1000);
			});
		}
	}

	Stock3Editor.create(
		document.querySelector( '#editor' ),
		{
			extraPlugins: [ ChartingAdapter ],
			mention: {
				feeds: [
					{
						marker: '@',
						feed: [
							{ id: '@Barney Stinson', userId: '1' },
							{ id: '@Lily Aldrin', userId: '2' },
							{ id: '@Marshall Eriksen', userId: '3' },
							{ id: '@Robin Scherbatsky', userId: '4' },
							{ id: '@Ted Mosby', userId: '5' }
						],
					},
				],
			},
		}
	).catch( error => console.error( 'There was a problem initializing the editor.', error ));
</script>

</body>
</html>
